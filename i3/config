#-------------------#
#-----I3 Config-----#
#-------------------#

# This is my i3 config

#bar {
#        status_command i3status
#}

# Desktop 1 is for conky as a system viewer
assign [class="Conky"]          1
# Desktop 2 is for web browsing
assign [class="qutebrowser"]    2
# Desktop 3 is for terminal
assign [class="termite"]        3
# Desktop 4 is for matlab
assign [class="MATLAB*"]        4
# Desktop 5 is for reading stuff
assign [class="zathura"]        5
assign [class="ristretto"]      5
assign [class="nemo"]           5
# Desktop 6 is for writing
assign [class="libreoffice*"]   6
assign [class="Soffice"]        6
# Desktop 7 is for media viewing
assign [class="mpv"]            7
assign [class="smplayer"]       7
assign [class="cantata"]        7
# Desktop 8 is for image manipulation
assign [class="pdfsam"]         8
assign [class="gimp"]           8
assign [class="inkscape"]       8
assign [class="Blender"]        8
assign [class="openscad"]       8
# Desktop 9 is for Steam and games
assign [class="Steam"]          9
assign [class="Stepmania"]      9
# Desktop 0 is just bleh.


#--------------#
#-----KEYS-----#
#--------------#

set $Alt        Mod1
set $Meta       Mod4
set $Resize     ""
set $Gaps       ""
set $Gaps_In    ""
set $Gaps_Out   ""

##########################
#  LAUNCHERS & COMMANDS  #
##########################

# Terminal
bindsym $Meta+Return exec "/usr/bin/termite"

# Rofi (launcher)
bindsym $Meta+space exec "/usr/bin/rofi -show drun"

# Python
bindsym XF86Calculator exec "/usr/bin/termite -e bpython"

# Internet
bindsym XF86Explorer exec "/usr/bin/qutebrowser"

# Password-store
bindsym $Meta+p exec "/usr/bin/rofi-pass"

# Systemd units
bindsym $Meta+s exec "~/.config/rofi/systemd"

# Compton
bindsym $Meta+c exec "if (systemctl is-active --user compton@${DISPLAY}.service); then systemctl --user stop  compton@${DISPLAY}.service; else systemctl --user start compton@${DISPLAY}.service; fi"

# Redshift
bindsym $Meta+r exec "if (systemctl is-active --user redshift@${DISPLAY}.service); then systemctl --user stop  redshift@${DISPLAY}.service; else systemctl --user start redshift@${DISPLAY}.service; fi"

# Screenshot
bindsym Print exec "/usr/bin/maim ~/Pictures/Screenshots/$(date +%Y-%m-%d_%H:%M:%S).png"
bindsym Shift+Print exec "/usr/bin/maim -i $(xdotool getactivewindow) ~/Pictures/Screenshots/$(date +%Y-%m-%d_%H:%M:%S).png"
bindsym $Alt+Print exec "/usr/bin/maim -s ~/Pictures/Screenshots/$(date +%Y-%m-%d_%H:%M:%S).png"

# Screenlock
bindsym $Meta+Escape exec "systemctl --user start lock@${DISPLAY}.service"

# Change wallpaper
bindsym $Meta+Down exec "systemctl --user start wallpaper@${DISPLAY}.service"

# Music controls
bindsym XF86AudioPlay exec "/usr/bin/mpc toggle"
bindsym XF86AudioStop exec "/usr/bin/mpc stop"
bindsym XF86AudioNext exec "/usr/bin/mpc next"
bindsym XF86AudioPrev exec "if [[ $(/usr/bin/mpc status | awk '/^\[playing\]/ { sub(/\/.+/,\\"\\",$3); split($3,a,/:/); print a[1]*60+a[2] }') -ge 3 ]]; then /usr/bin/mpc seek 0; else /usr/bin/mpc prev; fi"

# Audio controls
bindsym XF86AudioRaiseVolume exec "/usr/bin/pamixer --increase 5"
bindsym XF86AudioLowerVolume exec "/usr/bin/pamixer --decrease 5"
bindsym XF86AudioMute exec "/usr/bin/pamixer --toggle-mute"

# Brightness controls
bindsym XF86MonBrightnessUp     exec "/usr/bin/brightnessctl -d $BRI_SCR s +10"
bindsym XF86MonBrightnessDown   exec "/usr/bin/brightnessctl -d $BRI_SCR s 10-"
bindsym XF86KbdBrightnessUp     exec "/usr/bin/brightnessctl -d $BRI_KBD s +1"
bindsym XF86KbdBrightnessDown   exec "/usr/bin/brightnessctl -d $BRI_KBD s 1-"

# reload the configuration file
bindsym $Meta+Shift+Escape reload

# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $Meta+F8 restart

# exit i3 (logs you out of your X session)
bindsym $Meta+$Alt+Escape exec "i3-nagbar -t warning -m 'Do you really want to exit i3? This will end your X session.' -b 'Yes, exit i3' 'systemctl --user stop i3@${DISPLAY}.service'"

# Music commands

############
#  WINDOW  #
############

# kill focused window
bindsym $Meta+q kill
# change focus
bindsym $Meta+h focus left
bindsym $Meta+j focus down
bindsym $Meta+k focus up
bindsym $Meta+l focus right
# move focused window
bindsym $Meta+Shift+h move left
bindsym $Meta+Shift+j move down
bindsym $Meta+Shift+k move up
bindsym $Meta+Shift+l move right
# enter fullscreen mode for the focused container
bindsym $Meta+m fullscreen toggle
# change container layout (stacked, tabbed, toggle split)
bindsym $Meta+s layout stacking
bindsym $Meta+Shift+s layout tabbed
# Change split direction
bindsym $Meta+t layout toggle split
# split in horizontal/vertical orientation
bindsym $Meta+period split h
bindsym $Meta+comma split v

# toggle tiling / floating
bindsym $Meta+f floating toggle

# focus the parent container
bindsym $Meta+a focus parent
# focus the child container
bindsym $Meta+d focus child

# Define names for default workspaces for which we configure key bindings later on.

# switch to workspace
bindsym $Meta+Right workspace next
bindsym $Meta+Left  workspace prev
bindsym $Meta+1 workspace 1
bindsym $Meta+2 workspace 2
bindsym $Meta+3 workspace 3
bindsym $Meta+4 workspace 4
bindsym $Meta+5 workspace 5
bindsym $Meta+6 workspace 6
bindsym $Meta+7 workspace 7
bindsym $Meta+8 workspace 8
bindsym $Meta+9 workspace 9
bindsym $Meta+0 workspace 0

# Move workspace between monitors
bindsym $Meta+$Alt+Right move workspace to output right
bindsym $Meta+$Alt+Left  move workspace to output left

# move focused container to workspace
bindsym $Meta+Shift+1 move container to workspace 1
bindsym $Meta+Shift+2 move container to workspace 2
bindsym $Meta+Shift+3 move container to workspace 3
bindsym $Meta+Shift+4 move container to workspace 4
bindsym $Meta+Shift+5 move container to workspace 5
bindsym $Meta+Shift+6 move container to workspace 6
bindsym $Meta+Shift+7 move container to workspace 7
bindsym $Meta+Shift+8 move container to workspace 8
bindsym $Meta+Shift+9 move container to workspace 9
bindsym $Meta+Shift+0 move container to workspace 0

# resize window (you can also use the mouse for that)
mode $Resize {
        # These bindings trigger as soon as you enter the resize mode

        # Pressing left will shrink the window’s width.
        # Pressing right will grow the window’s width.
        # Pressing up will shrink the window’s height.
        # Pressing down will grow the window’s height.
        bindsym h resize shrink width 10 px or 10 ppt
        bindsym j resize grow height 10 px or 10 ppt
        bindsym k resize shrink height 10 px or 10 ppt
        bindsym l resize grow width 10 px or 10 ppt

        # same bindings, but for the arrow keys
        bindsym Left resize shrink width 10 px or 10 ppt
        bindsym Down resize grow height 10 px or 10 ppt
        bindsym Up resize shrink height 10 px or 10 ppt
        bindsym Right resize grow width 10 px or 10 ppt

        # back to normal: Enter or Escape or $Meta+r
        bindsym Return mode "default"
        bindsym Escape mode "default"
}
bindsym $Meta+r mode $Resize

# Gap modifier
mode $Gaps {
        bindsym o      mode $Gaps_Out
        bindsym i      mode $Gaps_In
        bindsym Return mode "default"
        bindsym Escape mode "default"
}
mode $Gaps_In {
        bindsym plus  gaps inner current plus 4
        bindsym minus gaps inner current minus 4
        bindsym 0     gaps inner current set 0

        bindsym Shift+plus  gaps inner all plus 4
        bindsym Shift+minus gaps inner all minus 4
        bindsym Shift+0     gaps inner all set 0

        bindsym Return mode "default"
        bindsym Escape mode "default"
}
mode $Gaps_Out {
        bindsym plus  gaps outer current plus 4
        bindsym minus gaps outer current minus 4
        bindsym 0     gaps outer current set 0

        bindsym Shift+plus  gaps outer all plus 4
        bindsym Shift+minus gaps outer all minus 4
        bindsym Shift+0     gaps outer all set 0

        bindsym Return mode "default"
        bindsym Escape mode "default"
}
bindsym $Meta+g mode $Gaps

#-----------------#
#-----DISPLAY-----#
#-----------------#

for_window [class="^.*"] border pixel 0
gaps inner 24
gaps outer 12

# Font for window titles
font pango:monospace 11

# Use Mouse+$Meta to drag floating windows to their wanted position
floating_modifier $Meta

# vim:filetype=i3
