# Maintainer: Batuhan Baserdem <baserdem.batuhan@gmail.com>
pkgbase=sbp
pkgname=(
    'sbp-base'
    'sbp-gui'
    'sbp-extra'
    'sbp-efi'
    'sbp-xfce'
    'sbp-bspwm'
    'sbp-sway'
    'sbp-pantheon'
    'sbp-gnome'
    'sbp-server'
    'sbp-laptop'
    'sbp-notebook'
    'sbp-workstation'
    )
pkgver=0.9
pkgrel=97
pkgdesc="Meta packages to automate packages computer systems"
arch=('any')
url="https://github.com/bbaserdem/dotfiles"
licence=(MIT)
groups=(bbaserdem)
source=(
    'base.bt-polkit'
    'base.btaudio'
    'base.eth'
    'base.fixed-bitmap'
    'base.inotify'
    'base.install'
    'base.nftables'
    'base.nm-polkit'
    'base.nm-config'
    'base.pa_usb'
    'base.reflector.service'
    'base.reflector.timer'
    'base.snapper-root'
    'base.sudoers'
    'base.sysctl'
    'base.tether'
    'base.touchpad'
    'base.updater'
    'base.vconsole'
    'base.wifi'
    'base.zshenv'
    'gui.install'
    'gui.xinit-session'
    'extra.install'
    'extra.qbupdate'
    'efi.conf'
    'efi.kernel-conf'
    'efi.refind'
    'efi.refind-hook'
    'efi.signscript'
    'efi.stable'
    'laptop.backlight'
    'laptop.battery'
    'laptop.install'
    'laptop.network'
    'notebook.install'
    'notebook.network'
    'server.install'
    'workstation.install'
    'workstation.network'
    'xfce.install'
    'xfce.wallpaper'
    )
md5sums=('0d3afa7b391a50313df9449b80240807'
         '2adc9c1077ee29381b6ffedf871744f4'
         '5b3f3cc9194f11a91c4d10119bdfd656'
         '9806f3d492c6e42f3c8d44f3f5cd7d52'
         'aa695fb291e6b908235fe2570b0e9877'
         '5015cb28ae03d6666ee414aa4dbc545c'
         '2b4a7715d47beadb71db5f7b3369a4c9'
         '10b5ea5664e93646ef0f55f0e79b7022'
         '6ec1b1a831e7e42e0b472ea9a87858dc'
         '98b541ce9c3fd6fff43d8d4ae0762215'
         '7a1ff93a4e176d816c3ab6b5ea667ca0'
         'c972c1e5c236f6e3c0f7d1b4989ebb75'
         '00e5bc63b7bb82526516df8f45c4745c'
         'df0911ed7f3bbf285de4e3c08662dafd'
         '586c14c5f87f0097e0dfcb0454bfc2a6'
         '4e8599e6d74c8d019edccbb09faf392b'
         '18c4e485034ee909f9d4f3c7fab3954f'
         '3ad35f4045a3fce5bbfeecd0602c3cee'
         '1ddf47f1278958e4cc65bfbd96dbd6f7'
         'e71265ed72b65b8fb8092d6a4da0da3a'
         '7128851ee00d22284cbdbe9b8257ad14'
         '0f9cda1dc1000791243c223dbe251566'
         '023cfac6b2f1a6139f21796a53d6bc1d'
         'b19954dbb641caa1328725b405b49130'
         '17a7cda5f070fb76e1070a2f1fcbc21d'
         'a7c1283261fb4b3e77efa739c81f481d'
         '79267b7f57a008bdc8eadb1f399e41c5'
         '7084c59993679d938c4265818f2116a4'
         'ef83413fe51d5f37999b2ea8ef231d87'
         'a73c16867d95edef046d2b99b90af986'
         'e3217b4c75d3bc302347b7bdf27f29de'
         '36adcc034c7a69ffe93e2c0937f051da'
         '31bc6b40fff742f9281088c7acdb6feb'
         '36b1c6ab3b96c308b3ccc4a541ea0ca6'
         '963647fe81d1824bb977c3618d56959a'
         '098b5bd147a43c2e8a87ce4315128379'
         '7d625c54c37c6296f2ab1bbebbeb8308'
         '55ebc5c445f6ed66242d8e18fdd390ee'
         'aae95a0b1febfd5a55805e9d4c7b28c4'
         '7d432ab4dd0cbb05cc1399e8cd02cfbe'
         'b1fe2c5d8a90b0c4bc0668d505b141c3'
         '83e1b805fc92b3d1d3faf65158448687')
validpgpkeys=(
    '0B7151C823559DD8A7A04CE36426139E2F4C6CCE')

package_sbp-base() {
    provides=(vim vi)
    conflicts=(vim vi)
    install=base.install

    # Base and base-devel group
    depends=(
        'bash'          'bzip2'         'coreutils'     'cryptsetup'
        'device-mapper' 'dhcpcd'        'diffutils'     'e2fsprogs'
        'file'          'filesystem'    'findutils'     'gawk'
        'gcc-libs'      'gettext'       'glibc'         'grep'
        'gzip'          'inetutils'     'iproute2'      'iputils'
        'jfsutils'      'less'          'licenses'      'linux'
        'logrotate'     'lvm2'          'man-db'        'man-pages'
        'mdadm'         'pacman'        'pciutils'      'perl'
        'procps-ng'     'psmisc'        's-nail'        'sed'
        'shadow'        'tar'           'sysfsutils'    'systemd-sysvcompat'
        'texinfo'       'usbutils'      'util-linux'    'which'     'xfsprogs'
        'autoconf'      'automake'      'binutils'      'bison'
        'fakeroot'      'file'          'findutils'     'flex'
        'gawk'          'gcc'           'gettext'       'grep'
        'groff'         'gzip'          'libtool'       'm4'
        'make'          'pacman'        'patch'         'pkgconf'
        'sed'           'sudo'          'systemd'       'texinfo'
        'util-linux'    'which'         'btrfs-progs'   'f2fs-tools'
        'sudo'                                  # To check your privilage
        'exfat-utils' 'udftools'                # File system stuff
        'bridge-utils' 'nftables' 'hostapd'     # Networking stuff
        )
    # Utilities and Functionality
    depends+=(
        'archiso'                               # Live USB tool
        'alsa-utils' 'lib32-alsa-plugins'       # ALSA
        'pulseaudio' 'lib32-libpulse' 'pamixer' # Pulseaudio
        'pulseaudio-alsa'                       # Pulse plugins
        'bluez' 'bluez-libs'                    # Bluetooth
        'bluez-utils' 'pulseaudio-bluetooth'
        'clonezilla'                            # Hard disk cloning
        'ctags'                                 # Tag generator
        'cups' 'cups-pdf' 'cups-pk-helper'      # Printing
        'abcde' 'cdparanoia'                    # CD utility
        'amd-ucode' 'intel-ucode'               # Microcode updates
        'asp' 'devtools'                        # Arch devtools
        'reflector' 'aurutils' 'pacman-contrib' # Package management
        'atool' 'bzip2' 'cpio' 'gzip' 'lhasa'   # Archive tools
        'lzop' 'p7zip' 'tar' 'unace' 'unrar' 'unzip' 'xz' 'zip'
        'bash-completion'                       # Completion for bash
        'cpupower' 'rasdaemon'                  # CPU supervisor, AUR - MCE
        'discount' 'jq' 'yajl'                  # Markdown & JSON
        'flatpak'                               # Jailed software repository
        'geoip' 'geoip-database-extra'          # IP to location resolver
        'geoclue2'                              # GPS
        'git'                                   # Version control tool
        'gnupg' 'sshfs' 'openssh' 'fuse3' 'tor' # GPG and SSH
        'zsh' 'grml-zsh-config'                 # Improved shell
        'imagemagick'                           # Commandline image manipulator
        'inotify-tools' 'parted'                # File change watching & part.
        'languagetool'                          # Grammar checker
        'linux-firmware' 'linux-headers'        # Firmware for the Linux kernel
        'lm_sensors'                            # Thermal sensors
        'msmtp' 'msmtp-mta' 'isync'             # Mail and DAV stuff
        'networkmanager'                        # Network connection management
        'notmuch' 'vdirsyncer'
        'openconnect' 'openvpn'                 # VPN services
        'private-internet-access-vpn'           # AUR: Set up PIA
        'pass' 'qrencode'                       # Password manager
        'rsync'                                 # File synching utility
        'snapper'                               # BTRFS snapshot manager
        'tmux'                                  # Terminal multiplexer
        'tlp' 'stress'                          # Power manager
        'iwd' 'ppp' 'pptpclient'                # INet Wireless Daemon
        'networkmanager'                        # Network connection manager
        'mpc' 'mpd' 'mpdscribble'               # Music daemon and AUR scrobbler
        'syncthing' 'w3m' 'youtube-dl'          # Internet tools
        'tzupdate'                              # AUR: For autoupdating time
        'xkb-switch'                            # AUR: Manage keyboard states
        'xdg-user-dirs'                         # Manage user directories
        )
    # Console apps and utilities
    depends+=(
        'htop'                                      # Power sources
        'khal'                                      # Calendar
        'khard'                                     # Contacts
        'ncmpcpp'                                   # Music player
        'neofetch'                                  # System info printer
        'neomutt'                                   # Mail reader
        'neovim' 'python-neovim' 'python2-neovim'   # Text editor
        'newsboat'                                  # RSS/Atom feed
        'pulsemixer'                                # Pulse audio mixer
        'ranger' 'vifm'                             # File browser
        'todoman'                                   # Tasks manager
        'weechat'                                   # IRC client
        )
    # Dev stuff
    depends+=(
        'arduino' 'arduino-avr-core'            # Arduino stuff
        'arduino-docs' 'arm' 'arm-none-eabi-binutils' 'arm-none-eabi-gcc'
        'arm-none-eabi-newlib' 'avr-binutils' 'avr-gcc' 'avr-libc'
        'avrdude' 'dfu-util' 'dfu-programmer'
        'android-tools' 'android-udev' 'libmtp' # Android
        's3cmd'                                 # Amazon bucket console
        'clang' 'cmake'                         # C
        'bpython' 'jupyter-nbconvert'           # Python
        'jupyter-notebook' 'lapack' 'mathjax' 'openblas' 'python-matplotlib'
        'python-sympy' 'python-pandas' 'python-pexpect' 'python-scikit-learn'
        'python-ipykernel' 'python-neovim' 'python-numpy' 'python-virtualenv'
        'python-xdg' 'python2-pip' 'python-pip' 'python-jedi' 'python-magic'
        'jre8-openjdk' 'jre10-openjdk'          # Java
        'gcc6'                                  # For matlab
        )
    install -dm 0750 "${pkgdir}/etc/polkit-1/rules.d"
    install -dm 0750 "${pkgdir}/etc/sudoers.d"
    install -Dm 0644 base.bt-polkit         "${pkgdir}/etc/polkit-1/rules.d/51-blueman.rules"
    install -Dm 0644 base.btaudio           "${pkgdir}/etc/bluetooth/audio.conf"
    install -Dm 0644 base.eth               "${pkgdir}/etc/systemd/network/21-wired.network"
    install -Dm 0644 base.fixed-bitmap      "${pkgdir}/etc/fonts/conf.avail/90-fixed-bitmaps.conf"
    install -Dm 0644 base.inotify           "${pkgdir}/etc/sysctl.d/01-inotify.conf"
    install -Dm 0644 base.nftables          "${pkgdir}/etc/nftables.conf.sbp"
    install -Dm 0644 base.nm-polkit         "${pkgdir}/etc/polkit-1/rules.d/50-NetworkManager.rules"
    install -Dm 0644 base.nm-config         "${pkgdir}/etc/NetworkManager/conf.d/sbpbase.conf"
    install -Dm 0644 base.pa_usb            "${pkgdir}/etc/udev/rules.d/89-pulseaudio-usb.rules"
    install -Dm 0644 base.reflector.service "${pkgdir}/etc/systemd/system/reflector.service"
    install -Dm 0644 base.reflector.timer   "${pkgdir}/etc/systemd/system/reflector.timer"
    install -Dm 0644 base.snapper-root      "${pkgdir}/etc/snapper/configs/root"
    install -Dm 0750 base.sudoers           "${pkgdir}/etc/sudoers.d/sbp-base"
    install -Dm 0644 base.sysctl            "${pkgdir}/etc/sysctl.d/01-sysctl.conf"
    install -Dm 0644 base.tether            "${pkgdir}/etc/systemd/network/23-tether.network"
    install -Dm 0644 base.touchpad          "${pkgdir}/etc/X11/xorg.conf.d/30-touchpad.conf"
    install -Dm 0644 base.updater           "${pkgdir}/etc/systemd/system/pacman-update.service"
    install -Dm 0644 base.vconsole          "${pkgdir}/etc/vconsole.conf"
    install -Dm 0644 base.wifi              "${pkgdir}/etc/systemd/network/22-wireless.network"
    install -Dm 0644 base.zshenv            "${pkgdir}/etc/zsh/zshenv"
    # Make it so nano, vi and vim points to neovim
    install -dm 0755 "${pkgdir}/usr/bin"
    ln -sf /usr/bin/nvim "${pkgdir}/usr/bin/vim"
    ln -sf /usr/bin/nvim "${pkgdir}/usr/bin/nano"
    ln -sf /usr/bin/nvim "${pkgdir}/usr/bin/vi"
}

# Packages needed for a working gui
package_sbp-gui() {
    install=gui.install
    # X-org
    depends=(
        'xorgproto'             'xf86-video-vesa'       'xorg-bdftopcf'
        'xorg-docs'             'xorg-font-util'        'xorg-fonts-100dpi'
        'xorg-fonts-75dpi'      'xorg-fonts-encodings'  'xorg-iceauth'
        'xorg-luit'             'xorg-mkfontdir'        'xorg-mkfontscale'
        'xorg-server'           'xorg-server-common'    'xorg-server-devel'
        'xorg-server-xdmx'      'xorg-server-xephyr'    'xorg-server-xnest'
        'xorg-server-xvfb'      'xorg-server-xwayland'  'xorg-sessreg'
        'xorg-setxkbmap'        'xorg-smproxy'          'xorg-x11perf'
        'xorg-xauth'            'xorg-xbacklight'       'xorg-xcmsdb'
        'xorg-xcursorgen'       'xorg-xdpyinfo'         'xorg-xdriinfo'
        'xorg-xev'              'xorg-xgamma'           'xorg-xhost'
        'xorg-xinput'           'xorg-xkbcomp'          'xorg-xkbevd'
        'xorg-xkbutils'         'xorg-xkill'            'xorg-xlsatoms'
        'xorg-xlsclients'       'xorg-xmodmap'          'xorg-xpr'
        'xorg-xprop'            'xorg-xrandr'           'xorg-xrdb'
        'xorg-xrefresh'         'xorg-xset'             'xorg-xsetroot'
        'xorg-xvinfo'           'xorg-xwd'              'xorg-xwininfo'
        'xorg-xwud'             'xf86-input-libinput'   'xorg-xinit'
        'xorg-fonts-misc'
        'xsel'                      # Select text/area
        'xdo'                       # Do things on X windows
        'wayland'
        )
    # Login manager
    depends+=(
        'lightdm'
        'lightdm-gtk-greeter'
        'lightdm-gtk-greeter-settings'
        'lightdm-webkit2-greeter'
        'lightdm-webkit-theme-litarvan'
        )
    # Fonts, themes, icons etc.
    depends+=(
        'adobe-source-serif-pro-fonts'  # Nice serif font
        'bdf-tewi-git'                  # AUR: Nice bitmap font
        'gohufont'                      # AUR: Nice bitmap font
        'nerd-fonts-source-code-pro'    # AUR: Glyphs
        'noto-fonts-emoji'              # Emoji font
        'otf-fira-code'                 # Ligatures
        'siji-git'                      # AUR: Nice monospace font
        'steam-fonts'                   # AUR: Fonts for steam
        'tamsyn-font'                   # Nice monospace font
        'terminess-powerline-font-git'  # AUR: Console fonts
        'ttf-droid'                     # Default looking font
        'ttf-iosevka'                   # AUR: Statusline font
        'ttf-roboto'                    # Google fonts, for steam
        )
    # Theming
    depends+=(
        'arc-gtk-theme'                     # GTK theme
        'breeze-hacked-cursor-theme'        # Hacked cursor
        'elementary-icon-theme'             # Professional looking icon
        'gnome-themes-extra'                # Icon compatibility
        'gtk-engine-murrine'                # Fallback icons
        'kvantum-qt5'                       # QT5 theme engine
        'kvantum-theme-arc'                 # Nice theme
        'papirus-icon-theme'                # Nice icon theme
        'python-pyqt5'                      # QT stuff for python
        'qt4'                               # QT implementation
        'qt5-styleplugins'                  # QT GTK integration
        'sound-theme-elementary-git'        # AUR: ElementaryOS sounds
        'sound-theme-smooth'                # AUR: Complete sound theme
        'xcursor-comix'                     # Comic cursor
    )
    # Wallpapers
    depends+=(
        'archlinux-artwork'
        'archlinux-wallpaper'
        'elementary-wallpapers-git'
        'gnome-backgrounds'
        'plasma-workspace-wallpapers'
        'xfce4-artwork'
    )
    # Some universally useful GUI programs
    depends+=(
        'blueman'                               # Bluetooth manager
        'cantata'                               # MPD frontend
        'firefox'                               # Fallback browser
        'gparted'                               # Graphical partition editor
        'gtk2fontsel' 'gucharmap'               # Font and character map
        'mpv' 'smplayer'                        # Mpv frontend
        'network-manager-applet' 'nm-connection-editor'
        'pavucontrol'                           # Pulse audio control menu
        'pdfsam'                                # Pdf manipulator
        'plank'                                 # Dock
        'qemu' 'ovmf'                           # Virtualizer
        'redshift'                              # Screen dimmer
        'ristretto'                             # Image viewer
        'rofi' 'rofi-pass' 'rofi-emoji'         # Application launcher
        'system-config-printer'                 # Printer setup utility
        'termite'                               # Wayland native terminal
        'thunar'                                # File browser
        'thunar-volman' 'gvfs' 'thunar-archive-plugin' 'xarchiver' 'file-roller'
        'thunar-media-tags-plugin' 'tumbler' 'raw-thumbnailer' 'udisks2'
        'vlc'                                   # Media player
        'zathura' 'zathura-cb' 'zathura-djvu'   # Document viewer
        'zathura-pdf-mupdf' 'zathura-ps'
    )
    # Some universal useful gui functionality
    depends+=(
        'freerdp'                           # Remote desktop tool
        'gpicview'                          # Picture to ascii
        'libcanberra' 'libcanberra-pulse'   # Sound theme
        'pdfjs'                             # PDF rendering to webpages
        'polkit' 'polkit-gnome'             # Authentication
        'trezor-bridge-bin'                 # Hardware wallet
    )
    install -dm 0755 "${pkgdir}/usr/share/xsessions"
    install -Dm 0755 gui.xinit-session "${pkgdir}/usr/share/xsessions/xinitrc.desktop"
}

# Meant to be excluded from some setups due to size
package_sbp-extra() {
    depends=('sbp-base' 'sbp-gui')
    depends+=(
        'audacity'                              # Audio manipulator
        'blender'                               # 3d designing utility
        'cantata'                               # MPD frontend
        'd-feet'                                # D-Bus settings
        'darktable'                             # Raw format editor
        'gimp'                                  # GNU Image Manipulation
        'gitg'                                  # Git visualizer
        'gourmet'                               # Recipe tracker
        'inkscape'                              # Vector graphics editor
        'libreoffice-fresh'                     # Office suite
        'neovim-gtk-git'                        # AUR: Neovim gui
        'octave'                                # Octave
        'openscad'                              # CAD programming language
        'pamac-aur'                             # Package manager
        'picard'                                # Music tagger
        'qutebrowser'                           # Browser with vim binding
        'remmina'                               # Remote manager
        'rambox-bin'                            # AUR: Communication app
        'skypeforlinux-stable-bin'              # AUR: Skype app
        'spyder3'                               # Python dev environment
        'steam' 'steam-native-runtime' 'steamos-compositor'
        'stellarium'                            # Star viewer
        'syncthing-gtk'                         # Tray icon for syncthing
        'texlive-core' 'texlive-science' 'biber' # Latex
        'texlive-fontsextra' 'texlive-latexextra' 'texlive-pictures' 'texlive-pstricks'
        'udiskie'                               # Mount manager with tray icon
        'wine' 'samba'                          # Windows compatibility
        'zotero'                                # Referance manager
        )
    # Matlab dependencies
    depends+=(
        'gcc6' 'gconf' 'glu' 'gstreamer0.10-base' 'gtk2' 'libunwind' 'libxp'
        'libxp' 'libxpm' 'libxtst' 'nss' 'portaudio' 'python2' 'qt5-svg'
        'qt5-webkit' 'qt5-websockets' 'qt5-x11extras' 'xerces-c'
        )
    install -Dm 0644 extra.qbupdate "${pkgdir}/etc/pacman.d/hooks/99-qutebrowser.hook"
}

# Xfce-specific stuff
package_sbp-xfce() {
    install=xfce.install
    depends=('sbp-gui')
    depends+=(
        'exo'                       # File launcher
        'evince'                    # PDF viewer
        'firefox'                   # Web browser
        'garcon'                    # Menu specification ?
        'gtk-xfce-engine'           # Xfce GTK engine
        'kitty'                     # Terminal emulator
        'light-locker'              # Screen lock
        'mousepad'                  # Text editor
        'thunderbird'               # Mail client
        'xfce4-appfinder'           # App launcher
        'xfce4-battery-plugin'      # Power indicator
        'xfce4-clipman-plugin'      # Clupboard manager
        'xfce4-cpufreq-plugin'      # System resources display
        'xfce4-cpugraph-plugin'     # System resources display
        'xfce4-datetime-plugin'     # Time and date indicator
        'xfce4-dict'                # Dictionary
        'xfce4-diskperf-plugin'     # Disk usage indicator
        'xfce4-fsguard-plugin'
        'xfce4-genmon-plugin'
        'xfce4-mailwatch-plugin'
        'xfce4-mount-plugin'
        'xfce4-mpc-plugin'
        'xfce4-netload-plugin'
        'xfce4-notifyd'
        'xfce4-panel'
        'xfce4-power-manager'
        'xfce4-pulseaudio-plugin'
        'xfce4-screenshooter'
        'xfce4-sensors-plugin'
        'xfce4-session-git'
        'xfce4-settings'
        'xfce4-smartbookmark-plugin'
        'xfce4-systemload-plugin'
        'xfce4-taskmanager'
        'xfce4-terminal'            # Drop-down terminal
        'xfce4-time-out-plugin'
        'xfce4-timer-plugin'
        'xfce4-verve-plugin'
        'xfce4-wavelan-plugin'
        'xfce4-weather-plugin'
        'xfce4-whiskermenu-plugin'
        'xfce4-xkb-plugin'
        'xfconf'
        'xfdesktop'
        'xfwm4'
        'xfwm4-themes'
        )
    install -Dm 0755 xfce.wallpaper "${pkgdir}/usr/share/archlinux/wallpaper/archlinux-xfce4.jpg"
}

# Pantheon specific stuff
package_sbp-pantheon() {
    install=pantheon.install
    depends=('sbp-gui')
    depends+=(
        'capnet-assist'                     # AUR: Public access point prompt
        'cerbere'                           # AUR: Watchdog to relaunch serv.
        'contractor-git'                    # Context menu provider
        'eidete-bzr'                        # AUR: Screencaster
        'epiphany-pantheon'                 # AUR: GNOME browser, patched
        'file-roller-pantheon'              # AUR: Archive manipulator, patched
        'gala-git'                          # AUR: Pantheon window manager
        'gnome-settings-daemon-elementary'  # AUR: Setting panel with patches
        'granite'                           # GTK extension library
        'gtk-theme-elementary'              # AUR: GTK  theme
        'lightdm-pantheon-greeter-git'      # AUR: Lightdm greeter
        'pantheon-applications-menu-git'    # AUR: Applivation menu
        'pantheon-calculator-git'           # AUR: SImple calculator
        'pantheon-calendar-git'             # AUR: Pantheon calendar
        'pantheon-camera-git'               # AUR: Camera application
        'pantheon-code'                     # Text editor
        'pantheon-default-settings-git'     # AUR: Default settings
        'pantheon-dpms-helper-git'          # AUR: Display Monitor Power Signal
        'pantheon-files'                    # File browser
        'pantheon-files-plugin-dropbox-bzr' # AUR: Dropbox for File browser
        'pantheon-geoclue2-agent-git'       # AUR: Geoclue integration
        'pantheon-mail-git'                 # AUR: Mail client
        'pantheon-music'                    # Music player
        'pantheon-photos'                   # Photo viewer
        'pantheon-polkit-agent-git'         # AUR: Polkit agent
        'pantheon-print-git'                # AUR: Printing support (contractor)
        'pantheon-screenshot-git'           # AUR: Screenshot tool
        'pantheon-session-git'              # AUR: Session settings
        'pantheon-shortcut-overlay-git'     # AUR: Native shortcut overlay
        'pantheon-terminal'                 # Terminal
        'pantheon-videos'                   # Video player
        'plank'
        'switchboard-git'                   # AUR: System settings
        'switchboard-plug-a11y-git'         # AUR: accesibility
        'switchboard-plug-about-git'        # AUR: System info
        'switchboard-plug-applications-git' # AUR: Default applications
        'switchboard-plug-bluetooth-git'    # AUR: Bluetooth settings
        'switchboard-plug-datetime-git'     # AUR: Time and Date
        'switchboard-plug-desktop-git'      # AUR: Desktop setttings
        'switchboard-plug-display-git'      # AUR: Monitors
        'switchboard-plug-elementary-tweaks-git'    # AUR: Tweak tool
        'switchboard-plug-keyboard-git'     # AUR: Keyboard shortcuts
        'switchboard-plug-locale-git'       # AUR: Locale settings
        'switchboard-plug-mouse-touchpad-git'       # AUR: Pointer settings
        'switchboard-plug-network-git'      # AUR: Network settings
        'switchboard-plug-notifications-git'        # AUR: Notifications
        'switchboard-plug-online-accounts-git'      #*AUR: Logged accounts
        'switchboard-plug-parental-controls-git'    # AUR: Parental access
        'switchboard-plug-power-git'        # AUR: POwer settings
        'switchboard-plug-printers-git'     # AUR: Printer plugin
        'switchboard-plug-security-privacy-git'     # AUR: Security settings
        'switchboard-plug-sharing-git'      # AUR: Sharing settings
        'switchboard-plug-sound-git'        # AUR: Pulseaudio settings
        'switchboard-plug-user-accounts-git'        # AUR: User accounts
        'ttf-opensans'                      # AUR: System font
        'ttf-raleway'                       # AUR: Logo font
        'ttf-dejavu'                        # System font
        'ttf-droid'                         # System font
        'ttf-freefont'                      # System font
        'ttf-liberation'                    # System font
        'wingpanel-git'                     # AUR: Top bat
        'wingpanel-indicator-a11y-git'      #*AUR: Universal Access
        'wingpanel-indicator-ayatana-git'   #*AUR: Ayatana indicators
        'wingpanel-indicator-bluetooth-git' # AUR: Bluetooth
        'wingpanel-indicator-datetime-git'  # AUR: Time and date
        'wingpanel-indicator-keyboard-git'  # AUR: Keyboard layout
        'wingpanel-indicator-network-git'   # AUR: Network status
        'wingpanel-indicator-nightlight-git'        # AUR: Nightlight indicator
        'wingpanel-indicator-notifications-git'     # AUR: Notifications
        'wingpanel-indicator-power-git'     # AUR: Battery
        'wingpanel-indicator-privacy-git'   # AUR: Privacy
        'wingpanel-indicator-session-git'   # AUR: Log in/out
        'wingpanel-indicator-sound-git'     # AUR: Pulse-audio
        'wingpanel-indicator-sys-monitor-git'       # AUR: System indicator
        )
}

# GNOME stuff
package_sbp-gnome() {
    depends=('sbp-gui')
    depends+=(
        'baobab'                    # Directory tree analyser
        'eog'                       # Image viewing program
        'evince'                    # Doc viewer
        'chrome-gnome-shell'        # Browser and tweak integration
        'file-roller'               # Archive manager
        'firefox'                   # Browser
        'gnome-calendar'
        'gnome-characters'
        'gnome-clocks'
        'gnome-color-manager'
        'gnome-contacts'
        'gnome-control-center'
        'gnome-disk-utility'
        'gnome-documents'
        'gnome-font-viewer'
        'gnome-keyring'
        'gnome-logs'
        'gnome-maps'
        'gnome-menus'
        'gnome-photos'
        'gnome-screenshot'
        'gnome-session'
        'gnome-settings-daemon'
        'gnome-shell'
        'gnome-shell-extensions'
        'gnome-system-monitor'
        'gnome-terminal'
        'gnome-themes-extra'
        'gnome-todo'
        'gnome-tweaks'
        'mousetweaks'
        'mutter'
        'nautilus'
        'thunderbird'
        'totem'
    )
}

# Sway stuff
package_sbp-sway() {
    depends=('sbp-gui')
    depends+=(
        'brightnessctl'                 # Brightness controls
        'dex'                           # Autostart launcher
        'i3blocks'                      # Input to status-bar
        'mako-git'                      # Notification daemon
        'rofi' 'rofi-pass' 'rofi-emoji' # Application launcher
        'sway-git'                      # Wayland compositor
        'wlroots-git'                   # Wayland library
#        'redshift-sway-git'             # Screen dimmer for wayland
#        'rofi-wayland-git'              # App launcher
        )
    # i3 stuff
    depends+=(
        'dunst'                         # Notification daemon
        'feh'                           # Wallpaper management
        'i3-gaps'                       # Improved window manager
        'i3lock'                        # Screen locker
        'maim'                          # Screenshot utility
        'xss-lock'                      # Locks screen on power events
        )
}

# Bspwm stuff
package_sbp-bspwm() {
    depends=('sbp-gui')
    depends+=(
        'brightnessctl'                 # Brightness controls
        'bspwm'                         # Binary split partitioning WM
        'dex'                           # Autostart launcher
        'dunst'                         # Notification daemon
        'feh'                           # Wallpaper management
        'i3lock'                        # Screen locker
        'maim'                          # Screenshot utility
        'polybar-git'                   # AUR: Status bar
        'rofi' 'rofi-pass' 'rofi-emoji' # Application launcher
        'sxhkd'                         # Simple X hotkey daemon
        'xss-lock'                      # Locks screen on power events
        )
}


package_sbp-efi() {
    depends=('refind-efi' 'efibootmgr' 'efivar' 'efitools' 'sbsigntools')
    install -Dm 0755 efi.conf           "${pkgdir}/efi/EFI/rEFInd/refind.conf.example"
    install -Dm 0755 efi.kernel-conf    "${pkgdir}/boot/refind_linux.conf.example"
    install -Dm 0755 efi.refind         "${pkgdir}/etc/sbkeys/update-refind.sh"
    install -Dm 0644 efi.refind-hook    "${pkgdir}/etc/pacman.d/hooks/12-refind.hook"
    install -Dm 0755 efi.signscript     "${pkgdir}/etc/sbkeys/sbsign.sh"
    install -Dm 0644 efi.stable         "${pkgdir}/etc/pacman.d/hooks/11-stable.hook"
}

# Server specific stuff
package_sbp-server() {
    depends=('sbp-base' 'sbp-efi' 'sbp-extra')
    conflicts=('sbp-workstation' 'sbp-notebook' 'sbp-laptop')
    install=server.install
    depends+=(
        'apache'            # Web server
        'dovecot'           # IMAP email server
        'kodi'              # Media file server
        'mariadb'           # Database management
        'postfix'           # Mail transfer agent
        'rspamd'            # Spam filter for mail
        'transmission-cli'  # Torrenting
        'radicale'          # CalDAV and CardDAV server
        )
}

# Laptop specific stuff; AMD
package_sbp-laptop() {
    depends=('sbp-base' 'sbp-gui' 'sbp-extra' 'sbp-efi')
    conflicts=('sbp-workstation' 'sbp-server' 'sbp-notebook')
    install=laptop.install
    depends+=(
        'mesa' 'lib32-mesa'
        'mesa-demos' 'lib32-mesa-demos' 
        'libva-mesa-driver' 'lib32-libva-mesa-driver'
        'mesa-vdpau' 'lib32-mesa-vdpau'
        'libva-vdpau-driver'
        'xf86-video-amdgpu'
        'vulkan-radeon'
        )
    install -Dm 0755 laptop.network   "${pkgdir}/etc/udev/rules.d/10-network.rules"
    install -Dm 0644 laptop.backlight "${pkgdir}/etc/udev/rules.d/90-backlight.rules"
    install -Dm 0644 laptop.battery   "${pkgdir}/etc/udev/rules.d/91-battery.rules"
}

# Notebook specific stuff; Nvidia
package_sbp-notebook() {
    depends=('sbp-base' 'sbp-gui' 'sbp-extra' 'sbp-efi')
    conflicts=('sbp-workstation' 'sbp-server' 'sbp-laptop')
    install=notebook.install
    depends+=(
        'bbswitch-dkms'
        'bumblebee'
        'cuda'
        'lib32-nvidia-utils'
        'lib32-virtualgl'
        'mesa'
        'mesa-demos'
        'nvidia-dkms'
        'nvidia-settings'
        'nvidia-utils'
        'ocl-icd'
        'opencl-nvidia'
        'primus'
        )
    install -Dm 0755 notebook.network "${pkgdir}/etc/udev/rules.d/10-network.rules"
}

# Work specific stuff
package_sbp-workstation() {
    depends=('sbp-base' 'sbp-extra' 'sbp-gui')
    conflicts=('sbp-server' 'sbp-notebook' 'sbp-laptop')
    install=workstation.install
    depends+=(
        'cuda'
        'cudnn'
        'dropbox'
        'grub'
        'lib32-nvidia-340xx-utils'
        'nvdock'
        'nvidia-340xx-dkms'
        'nvidia-340xx-utils'
        'ocl-icd'
        'opencl-nvidia-340xx'
        'os-prober'
        'libva-vdpau-driver'
        )
    install -Dm 0755 workstation.network "${pkgdir}/etc/udev/rules.d/10-network.rules"
}

