# Maintainer: Batuhan Baserdem <baserdem.batuhan@gmail.com>
pkgname=sbp-sys-base
pkgver=1.0
pkgrel=28
pkgdesc="Meta package: system libraries and tools"
arch=('any')
url="https://github.com/bbaserdem/dotfiles"
licence=(MIT)
validpgpkeys=('0B7151C823559DD8A7A04CE36426139E2F4C6CCE')
install=base.install
source=(
    'base.build'
    'base.chroot-os'
    'base.install'
    'base.mpc-prev'
    'base.remove'
    'base.sync' )

depends=( 'sbp-sys-init' 'sbp-sys-boot' )

# Base & base-devel
depends+=(      # Gentoo has: baselayout
    'coreutils'
    'wget'
    'man-pages'
    'bzip2'
    'rsync'         # Gentoo has this on system
    'which'
    'gcc' 'gcc-libs'
    'iproute2'
    'sed'
    'findutils'
    'diffutils'
    'grep'
    'iputils'
    'xz'            # Gentoo has this on system
    'autoconf'      # Gentoo has gnuconf, probably analogues
    'file'
    'psmisc'
    'patch'
    'device-mapper'
    'bash'
    'shadow'
    'procps-ng'
    'tar'
    'make'
    'gzip'
    'less'
    'pacman'
    'openssh'       # Gentoo has ssh on system
    'e2fsprogs'
    'filesystem'    # Gentoo has baselayout: probably similar
    'inetutils'     # Gentoo has net-tools
    'binutils'
    'gawk'
    'util-linux'
    'glibc'         # Gentoo has libc
    'busybox'
    'kbd'           # NON-gentoo from here
    'automake' 'gettext' 'licenses' 'man-db' 'pciutils' 'perl' 's-nail'
    'texinfo' 'usbutils' 'bison' 'fakeroot' 'flex' 'groff' 'libtool'
    'm4' 'pkgconf' )

# Kernel and booting
depends+=(
    'amd-ucode' 'intel-ucode'
    'linux-firmware'
    'dracut'
    'edk2-ovmf')

# File system stuff
depends+=(
    'snapper'
    'parted'
    'btrfs-progs'
    'xfsprogs'
    'lvm2'
    'f2fs-tools'
    'fuse3'
    'jfsutils'
    'reiserfsprogs'
    'exfat-utils'
    'udftools'
    'udisks2')

# Hardware
depends+=( 
    'dmidecode'
    'hdparm'
    'i2c-tools'
    'lm_sensors'
    'lshw'
    'stress'
    'acpid'
    'cpupower'
    'powertop'
    'libinput')

# Encryption
depends+=(
    'pass' 'qrencode'
    'cryptsetup' 
    'gnupg'
    'openssh'
    'tor'
    'openconnect'
    'sshfs' 
    'openvpn' 'private-internet-access-vpn' )

# Network
depends+=(
    'bind-tools'
    'openresolv'
    'nftables'
    'unbound'
    'dhcpcd'
    'cups' 'cups-pdf' 'cups-pk-helper'
    'iwd'
    'bluez' 'bluez-libs' 'bluez-utils'
    'bridge-utils' 'hostapd' )

# Administration
depends+=(
    'logrotate'
    'sudo'
    'dbus'
    'etckeeper'
    'mlocate'
    'pam'
    'polkit'
    'inotify-tools'
    'fcron'
    'tzupdate' )

# Arch stuff
depends+=(
    'archiso' 
    'asp'
    'devtools'
    'reflector'
    'aurutils'
    'pacman-contrib' )

# Media
depends+=(
    'alsa-utils' 'lib32-alsa-plugins'
    'pulseaudio' 'lib32-libpulse' 'pulseaudio-alsa' 'pulseaudio-bluetooth'
    'pamixer'
    'mpc' 'mpd' 
    'cdparanoia' )

# Applications
depends+=(
    'qemu'
    'atool'
    'abcde'
    'zsh' 'grml-zsh-config'
    'dash'
    'neomutt' 'isync' 'notmuch'
    'ncmpcpp' 'mpdscribble'
    'tmux'
    'khal' 'khard'
    'htop'
    'neofetch'
    'neovim' 'python-neovim' 'python-pexpect' 'neovim-remote'
    'syncthing'
    'w3m'
    'youtube-dl'
    'newsboat'
    'pulsemixer'
    'todoman'
    'vifm'
    'weechat' )

# Utilities
depends+=(
    'bzip2' 'cpio' 'gzip' 'lhasa' 'lzop' 'p7zip' 'tar' 'unace' 'unrar' 'unzip'
    'xz' 'zip'
    'trash-cli'
    'ctags'
    'bash-completion'
    'fbset'
    'git'
    'discount' 'jq' 'yajl'
    'geoclue2'
    'imagemagick'
    'languagetool'
    'msmtp'
    'xdg-user-dirs'
    'xdg-utils'
    'cmake' 'clang'
    'fluidsynth' 'lib32-fluidsynth'
    's3cmd')

# Developement
depends+=(
    'arm-none-eabi-gcc' 'arm-none-eabi-binutils' 'arm-none-eabi-newlib'
    'avr-binutils' 'avr-gcc' 'avr-libc' 'avrdude' 'dfu-util' 'dfu-programmer'
    'android-tools' 'android-udev' 'libmtp'
    'bpython'
    'lapack' 'openblas'
    'python-pip' 'python-pipenv' )

package() {
    install -dm 0750 "${pkgdir}/etc/polkit-1/rules.d"
    install -dm 0750 "${pkgdir}/etc/sudoers.d"
    install -dm 0755 "${pkgdir}/etc"
    install -Dm 0644 base.bt-polkit         "${pkgdir}/etc/polkit-1/rules.d/51-blueman.rules"
    install -Dm 0755 base.build             "${pkgdir}/usr/bin/archrepo-build"
    install -Dm 0755 base.chroot-os         "${pkgdir}/usr/bin/chroot-os"
    install -Dm 0755 base.mpc-prev          "${pkgdir}/usr/bin/mpc-prev"
    install -Dm 0755 base.remove            "${pkgdir}/usr/bin/archrepo-remove"
    install -Dm 0755 base.sync              "${pkgdir}/usr/bin/archrepo-sync"
    # Make it so nano, vi and vim points to neovim
    install -dm 0755 "${pkgdir}/usr/bin"
    ln -sf /usr/bin/nvim "${pkgdir}/usr/bin/vim"
    ln -sf /usr/bin/nvim "${pkgdir}/usr/bin/nano"
    ln -sf /usr/bin/nvim "${pkgdir}/usr/bin/vi"
}
md5sums=('20861f3c110fc6212678f6b71f91457d'
         '9a2f3529c4e4ef9765b402ff6b5c8cb7'
         '305f8eae3d7981c6471bc431886b659a'
         '8a2dd425633e8fcd541de29b81d2c81d'
         'e08f3aac4fb834db851a561735051ee7'
         'a7a3dc4d0a03d05cb0fd9f8a27f37ad6'
         '93108d9cc17ae70a0366d08823936ee4'
         'e29974b9312d336d103206a1d78932cf'
         'fc1022caba32321ed2d73b690d3b26b7'
         '27e71de09f5f2003022e24be6166b9f5'
         '67fe3ab43b239e9c51cb23c19fe4f0a1'
         '2b4a7715d47beadb71db5f7b3369a4c9'
         '98b541ce9c3fd6fff43d8d4ae0762215'
         '57ed5eaba05f22cf4c3b8f2a55b8ca9e'
         '00e5bc63b7bb82526516df8f45c4745c'
         'df0911ed7f3bbf285de4e3c08662dafd'
         '67ea94609f342eff9687b5b553fc503b'
         '586c14c5f87f0097e0dfcb0454bfc2a6'
         '18c4e485034ee909f9d4f3c7fab3954f'
         '2d144f36bd6e9e431357d84ee2902d9e'
         '7128851ee00d22284cbdbe9b8257ad14')
