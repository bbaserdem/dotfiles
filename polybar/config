; vim: set filetype=dosini :

;====================;
;                    ;
;   Polybar Config   ;
;                    ;
;====================;

; Modify pulseaudio script for audio sink detection
; Add PIA mirror to the openvpn script

[colors]
bkgr =  ${env:PB_BKGR}
frgr =  ${env:PB_FRGR}
mute =  ${env:PB_MUTE}
crms =  ${env:PB_CRMS}
orng =  ${env:PB_ORNG}
gren =  ${env:PB_GREN}
cyan =  ${env:PB_CYAN}
indg =  ${env:PB_INDG}
viol =  ${env:PB_VIOL}

[settings]
screenchange-reload =       false
format-underline =          ${colors.cyan}
format-prefix-foreground =  ${colors.cyan}
format-foreground =         ${colors.frgr}
format-background =         ${colors.bkgr}
;compositing-background = xor
;compositing-background = screen
;compositing-foreground = source
;compositing-border = over

[global/wm]
margin-top = 0
margin-bottom = 0

;==========;
;          ;
;   Bars   ;
;          ;
;==========;

[bar/top]
;monitor =               ${env:PB_PMON}
width =                 99%
height =                32
offset-x =              .5%
offset-y =              0
background =            ${colors.bkgr}
format-background =     ${colors.bkgr}
foreground =            ${colors.frgr}
line-size =             2
line-color =            ${colors.mute}
padding-left =          1
padding-right =         1
module-margin-left =    1
module-margin-right =   1
font-0 =                "Iosevka:size=10:weight=regular"
font-1 =                "FuraCode Nerd Font:size=10:weight=regular"
fixed-center =          true
tray-detached =         false
tray-transparent =      true
tray-background =       ${colors.bkgr}
tray-position =         left
modules-left =          i3 xwindow
modules-center =        tasks mpd offlineimap
modules-right =         wifi ethernet tethering vpn date time backlight volume battery
bottom =                false

;=========;
; MODULES ;
;=========;

[module/i3]
type =                          internal/i3
pin-workspaces =                false
ws-icon-0 =                     "1;漣"
ws-icon-1 =                     "2;爵"
ws-icon-2 =                     "3;"
ws-icon-3 =                     "4;"
ws-icon-4 =                     "5;"
ws-icon-5 =                     "6;"
ws-icon-6 =                     "7;"
ws-icon-7 =                     "8;"
ws-icon-8 =                     "9;"
ws-icon-9 =                     "10;"
ws-icon-default =               ""
; Mode: Keysym mode for shortcuts
label-mode =                    %mode%
label-mode-padding =            1
label-mode-foreground =         ${colors.frgr}
label-mode-underline =          ${colors.bkgr}
; Focused: The workspace you currently are on
label-focused =                 %icon%
label-focused-padding =         1
label-focused-foreground =      ${colors.cyan}
label-focused-underline =       ${colors.cyan}
; Unfocused: Windows are there, but workspace not visible
label-unfocused =               %icon%
label-unfocused-padding =       1
label-unfocused-foreground =    ${colors.mute}
label-unfocused-underline =     ${colors.mute}
; Visible: Workspace is on a monitor but not focused
label-visible =                 %icon%
label-visible-padding =         1
label-visible-foreground =      ${colors.frgr}
label-visible-underline =       ${colors.frgr}
; Urgent: There is a window with attention here
label-urgent =                  !%icon%
label-urgent-padding =          1
label-urgent-foreground =       ${colors.orng}
label-urgent-underline =        ${colors.orng}

[module/xwindow]
type =                          internal/xwindow
format-underline =              ${colors.cyan}
format-prefix =                 " "
format-prefix-foreground =      ${colors.cyan}
label =                         %title%
label-maxlen =                  30


[module/tasks]
type =                      custom/script
format-prefix =             "省 "
format-prefix-foreground =  ${colors.cyan}
format =                    <label>
exec =                      $XDG_CONFIG_HOME/polybar/taskwarrior_info.sh --show
interval =                  60
click-left =                $XDG_CONFIG_HOME/polybar/taskwarrior_info.sh --open
click-right =               $XDG_CONFIG_HOME/polybar/taskwarrior_info.sh --done

[module/timekeep]
type =                      internal/date
format-prefix-foreground =  ${colors.cyan}
interval =                  1
date =                      " %a, %d %b"
date-alt =                  " %d-%m-%y"
time =                      " %H:%M:%S"
time-alt =                  " %H:%M:%S"

[module/date]
inherit =                   module/timekeep
format-prefix =             " "
label =                     %date%
click-left =                exec $TERMINAL -e calcurse

[module/time]
inherit =                   module/timekeep
format-prefix =             " "
label =                     %time%

[module/offlineimap]
type =                      custom/script
exec =                      $XDG_CONFIG_HOME/polybar/offlineimap_info.sh
interval =                  5
format =                    <label>
click-left =                $XDG_CONFIG_HOME/polybar/offlineimap_info.sh --toggle

[module/backlight]
type =                      internal/backlight
format-prefix-foreground =  ${colors.cyan}
card =                      ${env:BRI_SCR}
format-prefix =             " "
format =                    <label>
label =                     %percentage%%

[module/battery]
type =                          internal/battery
format-prefix-foreground =      ${colors.cyan}
battery =                       BAT0
adapter =                       AC0
full-at =                       98
format-charging =               <animation-charging> <label-charging>
format-discharging =            <ramp-capacity> <label-discharging>
format-full-prefix =            " "
ramp-capacity-0 =               
ramp-capacity-1 =               
ramp-capacity-2 =               
ramp-capacity-3 =               
ramp-capacity-4 =               
ramp-capacity-foreground =      ${colors.frgr}
animation-charging-0 =          
animation-charging-1 =          
animation-charging-2 =          
animation-charging-3 =          
animation-charging-4 =          
animation-charging-foreground = ${colors.frgr}
animation-charging-framerate =  750

[module/wifi]
type =                                  internal/network
format-prefix-foreground =              ${colors.cyan}
interval =                              3.0
format-connected =                      <label-connected>
format-connected-prefix =               " "
label-connected =                       %essid%
interface =                             wifi

[module/ethernet]
type =                                  internal/network
format-prefix-foreground =              ${colors.cyan}
interval =                              3.0
format-connected =                      <label-connected>
format-connected-prefix =               " "
label-connected =                       %local_ip%
interface =                             ethernet

[module/tethering]
type =                                  internal/network
format-prefix-foreground =              ${colors.cyan}
interval =                              3.0
format-connected-prefix =               " "
label-connected =                       %local_ip%
interface =                             usbtether

[module/vpn]
type =                                  custom/script
exec =                                  $XDG_CONFIG_HOME/polybar/vpn_info.sh
interval =                              5
format =                                <label>
label =                                 "%output%"
format-prefix =                         " "
format-prefix-foreground =              ${colors.cyan}

[module/volume]
type =                                  internal/pulseaudio
format-prefix-foreground =              ${colors.cyan}
click-right =                           exec pavucontrol &
format-volume =                         ${env:PB_VOLM}
format-muted =                          ${env:PB_NOVL}
label-volume =                          %percentage%%
label-muted =                           -
icon-headphones =                       
icon-speaker =                          
icon-hdmi =                             
icon-bluetooth =                        
ramp-volume-0 =                         
ramp-volume-1 =                         

[module/mpd]
type =                                  internal/mpd
format-online =                         ${env:PB_MPDA}
format-offline =                        ${env:PB_MPDI}
icon-play =                             
icon-pause =                            
icon-stop =                             
icon-prev =                             
icon-next =                             
icon-seekb =                            
icon-seekf =                            
icon-random =                           
icon-repeat =                           
icon-repeatone =                        
bar-progress-width =                    10
bar-progress-fill =                     
bar-progress-indicator =                
bar-progress-empty =                    
bar-progress-fill-foreground =          ${colors.crms}
bar-progress-indicator-foreground =     ${colors.frgr}
bar-progress-empty-foreground =         ${colors.mute}
label-song-maxlen =                     30
label-song =                            %title%
toggle-on-foreground =                  ${colors.cyan}
toggle-off-foreground =                 ${colors.mute}
